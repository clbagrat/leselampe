<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover"
    />
    <title>Leselampe — German Reader</title>
    <link rel="icon" href="favicon.svg" type="image/svg+xml" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Fraunces:opsz,wght@9..144,400;9..144,600;9..144,700&family=Space+Grotesk:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />
    <link rel="apple-touch-icon" href="assets/icons/apple-touch-icon.png" />
  </head>
  <body class="view-home">
    <div class="page">
      <header class="top-bar">
        <button
          class="brand brand-button"
          type="button"
          id="brandButton"
          data-i18n-aria-label="app.action.home"
        >
          <span class="brand-mark">✦</span>
          <div>
            <p class="brand-title">Leselampe</p>
          </div>
        </button>
        <div
          class="page-dots"
          id="pageDots"
          role="tablist"
          aria-label="Pages"
          data-i18n-aria-label="app.pages"
        ></div>
      </header>

      <main class="layout">
        <section
          class="book-panel library-panel"
          aria-label="German reader"
          data-i18n-aria-label="screen.library"
          data-screen="library"
          data-library-view="stories"
        >
          <div class="library-stack" id="libraryStack">
            <div class="library-view" data-library-view="stories">
              <button class="library-hint" type="button" data-library-target="rss">
                <span class="library-hint-arrow">^^^^</span>
                <span class="library-hint-label" data-i18n="library.hint.rss">RSS feed</span>
              </button>
              <section
                class="home-library"
                aria-label="Your stories"
                data-i18n-aria-label="library.section.stories"
              >
                <div class="home-library-header">
                <div>
                  <h2 class="home-title" data-i18n="library.title.stories">Your stories</h2>
                </div>
                  <button class="ghost mini" type="button" id="homeAddText" data-i18n="action.add">
                    Add
                  </button>
                </div>
                <p class="home-subtitle" data-i18n="library.subtitle.stories">
                  Tap a text to open it in the reader.
                </p>
                <p class="home-empty is-hidden" id="homeEmpty">
                  <span data-i18n="library.empty.stories">
                    No texts yet. Add your first story to start reading.
                  </span>
                </p>
                <button
                  class="primary is-hidden home-empty-action"
                  type="button"
                  id="homeEmptyAdd"
                  data-i18n="library.action.add_story"
                >
                  Add new story
                </button>
                <div class="home-list" id="homeList"></div>
              </section>
            </div>

            <div class="library-view" data-library-view="rss">
              <button class="library-hint" type="button" data-library-target="stories">
                <span class="library-hint-arrow">^^^^</span>
                <span class="library-hint-label" data-i18n="library.hint.stories">Your stories</span>
              </button>
              <section
                class="home-library"
                aria-label="RSS feed"
                data-i18n-aria-label="library.section.rss"
              >
                <div class="home-library-header">
                <div>
                  <h2 class="home-title" data-i18n="library.title.rss">RSS feed</h2>
                </div>
              <div class="home-library-actions">
                <button class="ghost mini" type="button" id="rssRefresh" data-i18n="action.refresh">
                  Refresh
                </button>
              </div>
            </div>
            <p class="home-subtitle" data-i18n="rss.subtitle">
              Unread posts from your subscribed feeds.
            </p>
            <p class="helper-text rss-status is-hidden" id="rssFeedStatus"></p>
            <p class="home-empty" id="rssFeedEmpty" data-i18n="rss.empty">
              Add a feed to start reading.
            </p>
            <button
              class="primary is-hidden home-empty-action"
              type="button"
              id="rssFeedEmptyAction"
              data-i18n="rss.action.add_feed"
            >
              Add a feed
            </button>
            <div class="home-list rss-feed-list" id="rssFeedList"></div>
              </section>
            </div>
          </div>
        </section>

        <section
          class="book-panel reader-panel is-hidden"
          aria-label="Reader"
          data-screen="reader"
          data-i18n-aria-label="screen.reader"
        >
          <div class="reader-progress" aria-hidden="true">
            <div class="reader-progress-bar" id="readerProgressBar"></div>
          </div>
          <div class="reader-view" id="readerView">
            <div class="book-header">
              <div>
                <h1></h1>
              </div>
              <div class="book-header-actions">
                <button
                  class="ghost mini"
                  type="button"
                  id="readerTts"
                  data-i18n="reader.action.listen"
                >
                  Listen
                </button>
                <button
                  class="ghost mini"
                  type="button"
                  id="openReaderAppearance"
                  data-i18n="reader.action.font"
                >
                  Font
                </button>
              </div>
            </div>

            <article class="reader" id="reader" aria-live="polite" lang="de"></article>
            <div class="reader-end" id="readerEnd" aria-hidden="true"></div>
            <div class="reader-cta">
              <button class="primary" type="button" id="readerFinish" data-i18n="reader.action.finish">
                I finish reading
              </button>
              <p class="reader-status is-hidden" id="readerStatus">
                <span class="reader-status-label" data-i18n="reader.status.read">
                  Marked as read.
                </span>
              </p>
              <p class="reader-status-lemmas is-hidden" id="readerStatusLemmas"></p>
            </div>
          </div>
        </section>

        <section
          class="book-panel"
          aria-label="Lemmas"
          data-screen="lemmas"
          data-i18n-aria-label="screen.lemmas"
        >
          <section
            class="home-library"
            aria-label="Translated lemmas"
            data-i18n-aria-label="lemmas.section"
          >
            <div class="home-library-header">
              <div>
                <h2 class="home-title" data-i18n="lemmas.title">Translated lemmas</h2>
              </div>
              <div class="home-library-actions">
                <button class="ghost" type="button" id="exportLemmas" data-i18n="lemmas.action.export">
                  Export
                </button>
              </div>
            </div>
            <div class="saved-section">
              <p class="helper-text" data-i18n="lemmas.helper">
                We track lemmas when you translate a word. New stories try to include top lemmas;
                included ones become learned.
              </p>
              <div class="lemma-search">
                <input
                  type="search"
                  id="lemmaSearch"
                  placeholder="Search lemmas..."
                  autocomplete="off"
                  data-i18n-placeholder="lemmas.search.placeholder"
                />
              </div>
              <p class="saved-title" data-i18n="lemmas.to_learn">Lemmas to learn</p>
              <p class="empty-state is-hidden" id="lemmaEmpty">
                <span data-i18n="lemmas.empty">
                  No lemmas yet. Translate a word to start tracking.
                </span>
              </p>
              <div class="lemma-list" id="lemmaList"></div>
              <p class="saved-title learned-title" data-i18n="lemmas.learned">
                Learned lemmas
              </p>
              <p class="empty-state is-hidden" id="lemmaLearnedEmpty">
                <span data-i18n="lemmas.learned.empty">No learned lemmas yet.</span>
              </p>
              <div class="lemma-list" id="lemmaLearnedList"></div>
              <div class="saved-actions">
                <button class="ghost" type="button" id="clearLemmas" data-i18n="lemmas.action.clear">
                  Clear history
                </button>
              </div>
            </div>
          </section>
        </section>

        <section
          class="book-panel training-panel"
          aria-label="Trainings"
          data-screen="trainings"
          data-i18n-aria-label="screen.trainings"
        >
          <section
            class="home-library"
            aria-label="Training sessions"
            data-i18n-aria-label="trainings.section"
          >
            <div class="home-library-header">
              <div>
                <h2 class="home-title" data-i18n="trainings.title">Trainings</h2>
              </div>
            </div>
            <p class="home-subtitle" data-i18n="trainings.subtitle">
              Short drills for cases and articles.
            </p>
            <div class="training-list-view" id="trainingListView">
              <div class="home-list" id="trainingList">
                <article
                  class="home-item"
                  id="trainingDativAkkItem"
                  data-training-id="dativ-akkusativ"
                >
                  <div class="home-item-content" role="button" tabindex="0">
                    <div class="home-item-head">
                      <p class="home-item-title" data-i18n="training.dativ_akk.title">
                        Dativ oder Akkusativ
                      </p>
                    </div>
                    <div class="rss-feed-meta">
                      <span class="rss-feed-source" data-i18n="trainings.item.label">Training</span>
                      <span class="rss-feed-check" id="trainingSessionSizeLabel">—</span>
                    </div>
                    <p
                      class="home-item-excerpt"
                      data-i18n="training.dativ_akk.description"
                    >
                      Choose the case, then the article.
                    </p>
                    <div
                      class="rss-item-loading-row training-item-status is-hidden"
                      id="trainingItemStatus"
                    >
                      <p
                        class="helper-text training-item-status-label"
                        id="trainingItemStatusLabel"
                        data-i18n="trainings.status.generating_short"
                      >
                        Generating
                      </p>
                      <button
                        class="rss-item-abort is-hidden"
                        type="button"
                        id="trainingAbort"
                        data-i18n="trainings.action.abort"
                      >
                        Abort
                      </button>
                    </div>
                  </div>
                  <div class="home-item-actions">
                    <button class="home-action" type="button" data-training-count="3">3</button>
                    <button class="home-action" type="button" data-training-count="5">5</button>
                    <button class="home-action" type="button" data-training-count="10">10</button>
                    <button class="home-action" type="button" data-training-count="15">15</button>
                    <button class="home-action" type="button" data-training-count="20">20</button>
                  </div>
                </article>
              </div>
            </div>
            <div class="training-detail-view is-hidden" id="trainingDetailView">
              <div class="training-detail-header">
                <div class="training-detail-heading">
                  <h2 class="training-screen-title" data-i18n="training.dativ_akk.title">
                    Dativ oder Akkusativ
                  </h2>
                  <p class="training-screen-subtitle" data-i18n="training.dativ_akk.description">
                    Choose the case, then the article.
                  </p>
                </div>
                <div class="training-detail-actions">
                  <button class="ghost mini" type="button" id="trainingClose" data-i18n="trainings.action.back">
                    Back
                  </button>
                </div>
              </div>
              <div class="training-card" id="trainingDativAkkusativ">
                <div class="training-progress">
                  <div class="training-progress-bar" id="trainingProgressBar"></div>
                </div>
                <div class="training-body" id="trainingBody">
                  <p class="training-sentence" id="trainingSentence">—</p>
                </div>
                <div class="training-summary is-hidden" id="trainingSummary">
                  <p class="training-summary-title" data-i18n="trainings.summary.title">
                    Training completed
                  </p>
                  <p class="training-summary-score" id="trainingSummaryScore">—</p>
                  <p
                    class="training-summary-note is-hidden"
                    id="trainingSummaryNote"
                    data-i18n="trainings.summary.note"
                  >
                    Sentences with mistakes will return in future trainings.
                  </p>
                  <button class="primary" type="button" id="trainingSummaryClose" data-i18n="trainings.action.close">
                    Close
                  </button>
                </div>
              </div>
              <div class="training-card training-explain-card is-hidden" id="trainingExplainCard">
                <p class="training-explain-title" data-i18n="trainings.explain.title">Explanation</p>
                <p class="training-explain-text" id="trainingExplainText">—</p>
              </div>
              <div class="training-card training-case-card" id="trainingCaseCard">
                <div class="training-controls" id="trainingControls">
                  <div class="training-options" id="trainingCaseOptions">
                    <button
                      class="option-button"
                      type="button"
                      data-case="dative"
                      data-i18n="training.case.dative"
                    >
                      Dativ
                    </button>
                    <button
                      class="option-button"
                      type="button"
                      data-case="accusative"
                      data-i18n="training.case.accusative"
                    >
                      Akkusativ
                    </button>
                  </div>
                </div>
              </div>
              <div class="training-card training-article-card" id="trainingArticleCard">
                <div class="training-controls">
                  <div class="training-gender is-hidden" id="trainingGender">
                    <span class="training-gender-value" id="trainingGenderValue">—</span>
                  </div>
                  <div
                    class="training-options training-article-options is-hidden"
                    id="trainingArticleOptions"
                  ></div>
                </div>
              </div>
              <div class="training-controls-card" id="trainingControlsCard">
                <p class="helper-text training-feedback is-hidden" id="trainingFeedback"></p>
                <p class="helper-text training-status is-hidden" id="trainingStatus"></p>
                <div class="training-actions">
                  <button class="ghost" type="button" id="trainingExplain" data-i18n="trainings.action.explain">
                    Explain
                  </button>
                  <button class="primary" type="button" id="trainingNext" data-i18n="trainings.action.next">
                    Next
                  </button>
                </div>
              </div>
            </div>
          </section>
        </section>

        <aside
          class="translation-panel is-hidden"
          id="translationPanel"
          aria-live="polite"
          data-screen="translation"
        >
          <div class="panel-body">
            <p class="panel-german" id="selectionGerman" data-i18n="translation.tap_word">
              Tap a word
            </p>
            <div class="panel-divider sentence-divider is-hidden" id="sentenceDivider" aria-hidden="true"></div>
            <p class="panel-english" id="selectionEnglish" data-i18n="translation.placeholder">
              Translation will appear here.
            </p>
            <div class="panel-divider" id="translationDivider" aria-hidden="true"></div>
            <div class="governing-legend" id="panelGoverningLegend" aria-hidden="true">
              <span class="legend-item" id="panelGenderLegendItem">
                <span class="legend-swatch governing-gender" id="panelGenderWord">—</span>
                <span data-i18n="translation.legend.gender">gender governor</span>
              </span>
              <span class="legend-item" id="panelCaseLegendItem">
                <span class="legend-swatch governing-case" id="panelCaseWord">—</span>
                <span data-i18n="translation.legend.case">case governor</span>
              </span>
            </div>
            <p class="panel-grammar" id="selectionGrammar" data-i18n="translation.grammar.placeholder">
              Declension notes will appear here.
            </p>
            <div class="grammar-meta" id="grammarMeta">
              <div class="meta-pill" id="metaLemmaPill">
                <span class="meta-label" data-i18n="translation.meta.lemma">Dictionary form</span>
                <span class="meta-value" id="metaLemma">—</span>
              </div>
              <div class="meta-pill" id="metaHeadPill">
                <span class="meta-label" data-i18n="translation.meta.head">Head word</span>
                <span class="meta-value" id="metaHead">—</span>
              </div>
              <div class="meta-pill" id="metaArticlePill">
                <span class="meta-label" data-i18n="translation.meta.article">Article</span>
                <span class="meta-value" id="metaArticle">—</span>
              </div>
              <div class="meta-pill" id="metaGenderPill">
                <span class="meta-label" data-i18n="translation.meta.gender">Gender</span>
                <span class="meta-value" id="metaGender">—</span>
              </div>
              <div class="meta-pill" id="metaCasePill">
                <span class="meta-label" data-i18n="translation.meta.case">Case</span>
                <span class="meta-value" id="metaCase">—</span>
              </div>
            </div>
            <div class="panel-divider is-hidden" id="lemmaDiffDivider" aria-hidden="true"></div>
            <p class="panel-lemma-diff is-hidden" id="selectionLemmaDiff"></p>
          </div>
        </aside>

        <section
          class="book-panel settings-panel"
          aria-label="Settings"
          data-screen="settings"
          data-i18n-aria-label="screen.settings"
        >
          <div class="settings-desktop-warning" role="note">
            <span data-i18n="settings.desktop_warning">
              This website is developed for mobile screens only for the best on-the-go experience.
              Thanks for visiting on desktop — some layout details may look off here.
            </span>
          </div>
          <section
            class="home-library"
            aria-label="Reader settings"
            data-i18n-aria-label="settings.section.reader"
            data-settings-section="core"
          >
            <div class="home-library-header">
              <div>
                <h2 class="home-title" data-i18n="settings.title">Settings</h2>
              </div>
            </div>
            <div class="settings-body">
              <div class="api-modal-body settings-api-block" id="apiKeyGroup">
                <label class="api-label" for="apiKey" data-i18n="settings.api.label">
                  ChatGPT API key
                </label>
                <input
                  id="apiKey"
                  type="password"
                  placeholder="sk-..."
                  autocomplete="off"
                  data-i18n-placeholder="settings.api.placeholder"
                />
                <p class="helper-text api-key-error" id="apiKeyError" role="status" aria-live="polite"></p>
                <p class="helper-text api-key-help" data-i18n-html="settings.api.help">
                  Get your API key from
                  <a href="https://platform.openai.com/api-keys" target="_blank" rel="noopener noreferrer">
                    OpenAI Platform
                  </a>
                </p>
                <div class="api-modal-actions">
                  <button class="ghost" type="button" id="toggleKeyVisibility" data-i18n="action.show">
                    Show
                  </button>
                  <button class="ghost" type="button" id="clearKey" data-i18n="action.clear_key">
                    Clear key
                  </button>
                  <button class="primary" type="button" id="saveKey" data-i18n="action.save">
                    Save
                  </button>
                </div>
              </div>
              <div class="option-group settings-language-block" id="uiLanguageGroup">
                <p class="form-label" id="uiLanguageLabel" data-i18n="settings.language.label">
                  Language
                </p>
                <div class="option-row" role="group" data-i18n-aria-label="settings.language.label">
                  <button class="option-button" type="button" data-ui-lang="en" data-i18n="settings.language.en">
                    English
                  </button>
                  <button class="option-button" type="button" data-ui-lang="ru" data-i18n="settings.language.ru">
                    Russian
                  </button>
                </div>
              </div>
            </div>
          </section>
          <section
            class="home-library"
            aria-label="RSS manager"
            data-i18n-aria-label="settings.section.rss"
            data-settings-section="rss"
          >
            <div class="home-library-header">
              <div>
                <h2 class="home-title" data-i18n="settings.rss.title">Manage feeds</h2>
              </div>
            </div>
            <div class="settings-body">
              <div class="rss-input-row">
                <input
                  id="rssUrlInput"
                  type="url"
                  placeholder="https://example.com/feed.xml"
                  autocomplete="off"
                  data-i18n-placeholder="settings.rss.placeholder"
                />
                <button class="primary" type="button" id="rssAdd" data-i18n="rss.action.add_feed">
                  Add feed
                </button>
              </div>
              <div class="rss-search-row">
                <input
                  id="rssSearchInput"
                  type="url"
                  placeholder="Search by site or article URL"
                  autocomplete="off"
                  data-i18n-placeholder="settings.rss.search_placeholder"
                />
                <button class="ghost" type="button" id="rssSearch" data-i18n="action.search">
                  Search
                </button>
              </div>
              <div class="rss-search-results is-hidden" id="rssSearchResults"></div>
              <p class="helper-text rss-attribution">
                <a
                  href="https://feedsearch.dev"
                  target="_blank"
                  rel="noopener noreferrer"
                  data-i18n="settings.rss.attribution"
                >
                  powered by Feedsearch
                </a>
              </p>
              <p class="helper-text rss-status is-hidden" id="rssModalStatus"></p>
              <p class="helper-text" data-i18n="settings.rss.storage">
                We store your subscriptions locally in this browser.
              </p>
              <div class="option-group">
                <p class="form-label" data-i18n="settings.rss.thumbnails">Show thumbnails</p>
                <div class="option-row">
                  <button class="option-button" type="button" data-rss-thumbnails="on">
                    <span data-i18n="settings.appearance.toggle.on">On</span>
                  </button>
                  <button class="option-button" type="button" data-rss-thumbnails="off">
                    <span data-i18n="settings.appearance.toggle.off">Off</span>
                  </button>
                </div>
              </div>
              <p class="home-empty is-hidden" id="rssSubscriptionsEmpty" data-i18n="settings.rss.empty">
                No feeds yet.
              </p>
              <div class="rss-subscription-list" id="rssSubscriptions"></div>
            </div>
          </section>
          <section
            class="home-library"
            aria-label="Reader appearance"
            data-i18n-aria-label="settings.section.appearance"
            data-settings-section="appearance"
          >
            <div class="home-library-header">
              <div>
                <h2 class="home-title" data-i18n="settings.appearance.title">Reader appearance</h2>
              </div>
            </div>
            <div class="settings-body">
              <div class="option-group">
                <p class="form-label" data-i18n="settings.appearance.reader_font">Reader font</p>
                <div class="option-row">
                  <button class="option-button" type="button" data-font="serif" data-i18n="settings.appearance.font.serif">
                    Serif
                  </button>
                  <button class="option-button" type="button" data-font="sans" data-i18n="settings.appearance.font.sans">
                    Sans
                  </button>
                </div>
              </div>
              <div class="option-group">
                <p class="form-label" data-i18n="settings.appearance.reader_size">Reader size</p>
                <div class="slider-row">
                  <span class="slider-label">A</span>
                  <input
                    class="size-slider"
                    id="readerSizeSettings"
                    type="range"
                    min="10"
                    max="30"
                    step="1"
                  />
                  <span class="slider-label">A+</span>
                </div>
              </div>
              <div class="option-group">
                <p class="form-label" data-i18n="settings.appearance.line_spacing">Line spacing</p>
                <div class="slider-row">
                  <span class="slider-label" data-i18n="settings.appearance.spacing.tight">Tight</span>
                  <input
                    class="size-slider"
                    id="readerLeadingSettings"
                    type="range"
                    min="1.1"
                    max="2"
                    step="0.05"
                  />
                  <span class="slider-label" data-i18n="settings.appearance.spacing.loose">Loose</span>
                </div>
              </div>
              <div class="option-group">
                <p class="form-label" data-i18n="settings.appearance.hyphenation">Hyphenation</p>
                <div class="option-row">
                  <button class="option-button" type="button" data-hyphenation="on">
                    <span data-i18n="settings.appearance.toggle.on">On</span>
                  </button>
                  <button class="option-button" type="button" data-hyphenation="off">
                    <span data-i18n="settings.appearance.toggle.off">Off</span>
                  </button>
                </div>
              </div>
              <div class="option-group">
                <p class="form-label" data-i18n="settings.appearance.sentence_per_line">
                  One sentence per line
                </p>
                <div class="option-row">
                  <button class="option-button" type="button" data-sentence-per-line="on">
                    <span data-i18n="settings.appearance.toggle.on">On</span>
                  </button>
                  <button class="option-button" type="button" data-sentence-per-line="off">
                    <span data-i18n="settings.appearance.toggle.off">Off</span>
                  </button>
                </div>
              </div>
              <div class="option-group">
                <p class="form-label" data-i18n="settings.appearance.justification">Justification</p>
                <div class="option-row">
                  <button class="option-button" type="button" data-justify="left">
                    <span data-i18n="settings.appearance.justify.left">Left</span>
                  </button>
                  <button class="option-button" type="button" data-justify="justify">
                    <span data-i18n="settings.appearance.justify.justify">Justify</span>
                  </button>
                </div>
              </div>
            </div>
          </section>
          <div class="settings-footer">
            <button class="ghost mini" type="button" id="reloadApp" data-i18n="action.reload">
              Reload
            </button>
            <button class="danger mini" type="button" id="resetAllData" data-i18n="action.reset_all">
              Reset all data
            </button>
          </div>
        </section>
      </main>

      <section class="bottom-sheet" id="bottomSheet" aria-live="polite">
        <div class="sheet-handle" aria-hidden="true"></div>
        <div class="sheet-swipe-overlay" id="sheetSwipeOverlay" aria-hidden="true">
          <span class="sheet-swipe-label sheet-swipe-add" id="sheetSwipeAdd" data-i18n="translation.swipe.add">
            Add to lemmas
          </span>
          <span class="sheet-swipe-label sheet-swipe-ignore is-hidden" id="sheetSwipeIgnore" data-i18n="translation.swipe.ignore">
            Ignore
          </span>
        </div>
        <p class="sheet-german" id="sheetGerman" data-i18n="translation.tap_word_sentence">
          Tap a word or sentence
        </p>
        <div class="panel-divider sheet-divider sentence-divider is-hidden" id="sheetSentenceDivider" aria-hidden="true"></div>
        <p class="sheet-english" id="sheetEnglish" data-i18n="translation.placeholder">
          Translation will appear here.
        </p>
        <div class="sheet-compound is-hidden" id="sheetCompound">
          <div class="sheet-compound-list" id="sheetCompoundList"></div>
        </div>
        <div class="panel-divider sheet-divider" id="sheetDivider" aria-hidden="true"></div>
        <div class="sheet-grammar-stack">
          <div class="governing-legend" id="sheetGoverningLegend" aria-hidden="true">
            <span class="legend-item" id="sheetGenderLegendItem">
              <span class="legend-swatch governing-gender" id="sheetGenderWord">—</span>
              <span data-i18n="translation.legend.gender">gender governor</span>
            </span>
            <span class="legend-item" id="sheetCaseLegendItem">
              <span class="legend-swatch governing-case" id="sheetCaseWord">—</span>
              <span data-i18n="translation.legend.case">case governor</span>
            </span>
          </div>
          <div class="grammar-meta" id="sheetGrammarMeta">
            <div class="meta-pill" id="sheetMetaLemmaPill">
              <span class="meta-label" data-i18n="translation.meta.lemma">Dictionary form</span>
              <span class="meta-value" id="sheetMetaLemma">—</span>
            </div>
            <div class="meta-pill" id="sheetMetaHeadPill">
              <span class="meta-label" data-i18n="translation.meta.head">Head word</span>
              <span class="meta-value" id="sheetMetaHead">—</span>
            </div>
            <div class="meta-pill" id="sheetMetaArticlePill">
              <span class="meta-label" data-i18n="translation.meta.article">Article</span>
              <span class="meta-value" id="sheetMetaArticle">—</span>
            </div>
            <div class="meta-pill" id="sheetMetaGenderPill">
              <span class="meta-label" data-i18n="translation.meta.gender">Gender</span>
              <span class="meta-value" id="sheetMetaGender">—</span>
            </div>
            <div class="meta-pill" id="sheetMetaCasePill">
              <span class="meta-label" data-i18n="translation.meta.case">Case</span>
              <span class="meta-value" id="sheetMetaCase">—</span>
            </div>
          </div>
          <p class="sheet-grammar" id="sheetGrammar" data-i18n="translation.grammar.placeholder">
            Declension notes will appear here.
          </p>
          <div class="sheet-morphology is-hidden" id="sheetMorphology">
            <p class="sheet-label" data-i18n="translation.morphology.label">Morphological composition</p>
            <p class="sheet-morphology-text is-hidden" id="sheetMorphologyText" data-i18n="translation.morphology.placeholder">
              Morphological analysis will appear here.
            </p>
            <div class="sheet-morphology-table is-hidden" id="sheetMorphologyTable" aria-hidden="true"></div>
          </div>
        </div>
        <div class="sheet-actions">
          <p class="sheet-tip" data-i18n="translation.sheet.tip">Swipe this panel in any direction.</p>
          <div class="sheet-actions-buttons">
            <button
              class="ghost mini icon-button"
              type="button"
              id="sheetTts"
              aria-label="Listen to German"
              data-i18n-aria-label="translation.action.listen"
            >
              <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                <path d="M4 10v4h4l5 4V6l-5 4H4z" fill="currentColor" />
                <path
                  d="M16 9.5c1.5 1.5 1.5 3.5 0 5"
                  fill="none"
                  stroke="currentColor"
                  stroke-linecap="round"
                  stroke-width="2"
                />
                <path
                  d="M18.5 7c2.5 2.5 2.5 7.5 0 10"
                  fill="none"
                  stroke="currentColor"
                  stroke-linecap="round"
                  stroke-width="2"
                />
              </svg>
            </button>
            <button class="ghost mini" id="reportTranslationSheet" data-i18n="translation.report.action">
              Report issue
            </button>
          </div>
        </div>
      </section>

      <div class="modal is-hidden" id="addTextModal" role="dialog" aria-modal="true">
        <div class="modal-content">
          <div class="modal-header">
            <div>
              <h2 data-i18n="modal.add_story.title">Bring new stories</h2>
            </div>
            <button
              class="ghost circle"
              type="button"
              id="closeAddText"
              data-close-modal
              aria-label="Close"
              data-i18n-aria-label="action.close"
            >
              ×
            </button>
          </div>
          <div class="mode-switch">
            <button class="mode-button active" type="button" data-mode="generate" data-i18n="modal.add_story.mode.generate">
              Generate story
            </button>
            <button class="mode-button" type="button" data-mode="paste" data-i18n="modal.add_story.mode.paste">
              Paste text
            </button>
          </div>

          <div class="mode-panel" id="modeGenerate">
            <div class="form-grid">
              <div class="form-field">
                <label class="form-label" for="wordCount" data-i18n="modal.add_story.word_amount">
                  Word amount
                </label>
                <div class="slider-row">
                  <span class="slider-label">50</span>
                  <input
                    class="size-slider"
                    id="wordCount"
                    type="range"
                    min="50"
                    max="600"
                    step="10"
                    value="120"
                  />
                  <span class="slider-value" id="wordCountValue">120</span>
                </div>
              </div>
              <div class="form-field">
                <label class="form-label" id="levelLabel" data-i18n="modal.add_story.level">
                  Level
                </label>
                <div class="option-row level-row" role="group" aria-labelledby="levelLabel">
                  <button class="option-button" type="button" data-level="A1">A1</button>
                  <button class="option-button" type="button" data-level="A2">A2</button>
                  <button class="option-button" type="button" data-level="B1">B1</button>
                  <button class="option-button" type="button" data-level="B2">B2</button>
                  <button class="option-button" type="button" data-level="C1">C1</button>
                  <button class="option-button" type="button" data-level="C2">C2</button>
                </div>
              </div>
              <div class="form-field">
                <label class="form-label" id="styleLabel" data-i18n="modal.add_story.style">
                  Style
                </label>
                <div class="option-row style-row" role="group" aria-labelledby="styleLabel">
                  <button class="option-button" type="button" data-style="casual" data-i18n="modal.add_story.style.casual">
                    Casual
                  </button>
                  <button class="option-button" type="button" data-style="literary" data-i18n="modal.add_story.style.literary">
                    Literary
                  </button>
                </div>
              </div>
            </div>
            <div class="form-row prompt-row">
              <label class="form-label" for="promptBody" data-i18n="modal.add_story.prompt">
                Story prompt
              </label>
            </div>
            <textarea
              id="promptBody"
              rows="4"
              placeholder="A short story about a student on a rainy day, level A2."
              data-i18n-placeholder="modal.add_story.prompt_placeholder"
            ></textarea>
            <div class="form-row">
              <button class="ghost" type="button" id="suggestPrompt" data-i18n="action.suggest">
                Suggest
              </button>
              <button class="primary" type="button" id="generateStory" data-i18n="action.generate">
                Generate
              </button>
            </div>
            <p class="helper-text" data-i18n="modal.add_story.helper">
              Uses your ChatGPT API key from above.
            </p>
          </div>

          <div class="mode-panel is-hidden" id="modePaste">
            <label class="form-label" for="scanInput" data-i18n="modal.scan.input_label">
              Photo
            </label>
            <div class="form-row scan-row">
              <input id="scanInput" type="file" accept="image/*" capture="environment" />
            </div>
            <p class="helper-text scan-status is-hidden" id="scanStatus"></p>
            <label class="form-label" for="pasteTitle" data-i18n="modal.paste.title">
              Title
            </label>
            <input
              id="pasteTitle"
              type="text"
              placeholder="Your title"
              data-i18n-placeholder="modal.paste.title_placeholder"
            />
            <label class="form-label" for="pasteBody" data-i18n="modal.paste.body_label">
              German text
            </label>
            <textarea
              id="pasteBody"
              rows="6"
              placeholder="Paste German text here."
              data-i18n-placeholder="modal.paste.body_placeholder"
            ></textarea>
            <button class="primary" type="button" id="savePaste" data-i18n="modal.paste.action.add">
              Add to reader
            </button>
          </div>

        </div>
      </div>

      <div
        class="modal is-hidden"
        id="readerAppearanceModal"
        role="dialog"
        aria-modal="true"
        aria-labelledby="readerAppearanceTitle"
      >
        <div class="modal-content">
          <div class="modal-header">
            <div>
              <h2 id="readerAppearanceTitle" data-i18n="modal.appearance.title">Reader appearance</h2>
            </div>
            <button
              class="ghost circle"
              type="button"
              id="closeReaderAppearance"
              data-close-modal
              aria-label="Close"
              data-i18n-aria-label="action.close"
            >
              ×
            </button>
          </div>
          <div class="theme-modal-body">
            <div class="option-group">
              <p class="form-label" data-i18n="modal.appearance.font">Font</p>
              <div class="option-row">
                <button class="option-button" type="button" data-font="serif" data-i18n="settings.appearance.font.serif">
                  Serif
                </button>
                <button class="option-button" type="button" data-font="sans" data-i18n="settings.appearance.font.sans">
                  Sans
                </button>
              </div>
            </div>
            <div class="option-group">
              <p class="form-label" data-i18n="modal.appearance.size">Size</p>
              <div class="slider-row">
                <span class="slider-label">A</span>
                <input
                  class="size-slider"
                  id="readerSize"
                  type="range"
                  min="10"
                  max="30"
                  step="1"
                />
                <span class="slider-label">A+</span>
              </div>
            </div>
            <div class="option-group">
              <p class="form-label" data-i18n="settings.appearance.line_spacing">Line spacing</p>
              <div class="slider-row">
                <span class="slider-label" data-i18n="settings.appearance.spacing.tight">Tight</span>
                <input
                  class="size-slider"
                  id="readerLeading"
                  type="range"
                  min="1.1"
                  max="2"
                  step="0.05"
                />
                <span class="slider-label" data-i18n="settings.appearance.spacing.loose">Loose</span>
              </div>
            </div>
            <div class="option-group">
              <p class="form-label" data-i18n="settings.appearance.hyphenation">Hyphenation</p>
              <div class="option-row">
                <button class="option-button" type="button" data-hyphenation="on">
                  <span data-i18n="settings.appearance.toggle.on">On</span>
                </button>
                <button class="option-button" type="button" data-hyphenation="off">
                  <span data-i18n="settings.appearance.toggle.off">Off</span>
                </button>
              </div>
            </div>
            <div class="option-group">
              <p class="form-label" data-i18n="settings.appearance.sentence_per_line">
                One sentence per line
              </p>
              <div class="option-row">
                <button class="option-button" type="button" data-sentence-per-line="on">
                  <span data-i18n="settings.appearance.toggle.on">On</span>
                </button>
                <button class="option-button" type="button" data-sentence-per-line="off">
                  <span data-i18n="settings.appearance.toggle.off">Off</span>
                </button>
              </div>
            </div>
            <div class="option-group">
              <p class="form-label" data-i18n="settings.appearance.justification">Justification</p>
              <div class="option-row">
                <button class="option-button" type="button" data-justify="left">
                  <span data-i18n="settings.appearance.justify.left">Left</span>
                </button>
                <button class="option-button" type="button" data-justify="justify">
                  <span data-i18n="settings.appearance.justify.justify">Justify</span>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

    </div>

    <script src="script.js"></script>
  </body>
</html>
